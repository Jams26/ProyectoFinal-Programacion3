@using TiendaOnline.Models;
@model IEnumerable<Orden>
@{
    ViewData["Title"] = "Mapa";
}



<h2>Filtrar en el mapa</h2>

<form asp-action="Mapa" method="post">
    <select id="estado" name="estado">
        <option value="Todas">Todas</option>
        <option value="En proceso">En proceso</option>
        <option value="Enviado">Enviado</option>
        <option value="Completado">Completado</option>
    </select>
    <input type="submit" value="Consultar" />
</form>

<br />
<p class="display-4">Estas son las ordenes con estado @ViewData["Estado"]</p>
<br />
<br />
<div id="map" style="width:900px; height:500px; margin:0 auto;"></div>

<!--Scripts
<!-- Make sure you put this AFTER Leaflet's CSS -->
<script src="https://unpkg.com/leaflet@1.0.2/dist/leaflet.js"></script>
<script src="~/js/script.js"></script>

@foreach (var item in Model)
{


    <script>
            if ("@item.Estado" === "@ViewData["Estado"]" && "@ViewData["Estado"]" != 'Todas') {
                L.marker([@item.Lat, @item.Long], { draggable: true }).addTo(map)
                    .bindPopup("<b>No. Orden:</b> @item.numeroOrden <br> <b>Cliente:</b> @item.Correo <br><b>Estado:</b> @item.Estado ")
                    .openPopup();
            }else if ("@ViewData["Estado"]" === 'Todas') {
            L.marker([@item.Lat, @item.Long], { draggable: true }).addTo(map)
               .bindPopup("<b>No. Orden:</b> @item.numeroOrden <br> <b>Cliente:</b> @item.Correo <br><b>Estado:</b> @item.Estado " )
                    .openPopup();
                }
    </script>

}
